/*! js-cookie v2.1.3 | MIT */
!function(a){var b=!1;if("function"==typeof define&&define.amd&&(define(a),b=!0),"object"==typeof exports&&(module.exports=a(),b=!0),!b){var c=window.Cookies,d=window.Cookies=a();d.noConflict=function(){return window.Cookies=c,d}}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if("undefined"!=typeof document){if(arguments.length>1){if(f=a({path:"/"},d.defaults,f),"number"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(i){}return e=c.write?c.write(e,b):encodeURIComponent(e+"").replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(b+""),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape),document.cookie=b+"="+e+(f.expires?"; expires="+f.expires.toUTCString():"")+(f.path?"; path="+f.path:"")+(f.domain?"; domain="+f.domain:"")+(f.secure?"; secure":"")}b||(g={});for(var j=document.cookie?document.cookie.split("; "):[],k=/(%[0-9A-Z]{2})+/g,l=0;l<j.length;l++){var m=j[l].split("="),n=m.slice(1).join("=");'"'===n.charAt(0)&&(n=n.slice(1,-1));try{var o=m[0].replace(k,decodeURIComponent);if(n=c.read?c.read(n,o):c(n,o)||n.replace(k,decodeURIComponent),this.json)try{n=JSON.parse(n)}catch(i){}if(b===o){g=n;break}b||(g[o]=n)}catch(i){}}return g}}return d.set=d,d.get=function(a){return d.call(d,a)},d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,"",a(c,{expires:-1}))},d.withConverter=b,d}return b(function(){})});
/*! Lazy Load 1.9.7 - MIT license - Copyright 2010-2015 Mika Tuupola */
!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);
/*! php4dvd 3.5.0 - GNU license */
function search(){if(!ajaxSearchLock){ajaxSearchLock=!0;var e="./#!/",o="./?go=movies",t=$("#q").val();t?(o+="&q="+encodeURIComponent(t),e+="search/"+encodeURIComponent(t)+"/",Cookies.set("search",t,{expires:14})):Cookies.remove("search");var n=$("#category").val();n?(o+="&c="+encodeURIComponent(n),e+="category/"+encodeURIComponent(n)+"/",Cookies.set("category",n,{expires:14})):Cookies.remove("category");var a=$("#format").val();a?(o+="&f="+encodeURIComponent(a),e+="format/"+encodeURIComponent(a)+"/",Cookies.set("format",a,{expires:14})):Cookies.remove("format");var s=$("#sort").val();s?(o+="&s="+encodeURIComponent(s),e+="sort/"+encodeURIComponent(s)+"/",Cookies.set("sort",s,{expires:14})):Cookies.remove("sort");var r=$("#l").val();r?(o+="&l="+encodeURIComponent(r),Cookies.set("layout",r,{expires:14})):Cookies.set("layout",0);var i=$("#movie").val();i?(o+="&movie="+encodeURIComponent(i),Cookies.set("movie",i,{expires:14})):Cookies.set("movie",0);var c=$("#tv").val();c?(o+="&tv="+encodeURIComponent(c),Cookies.set("tv",c,{expires:14})):Cookies.set("tv",0);var m=$("#own").val();m?(o+="&own="+encodeURIComponent(m),Cookies.set("own",m,{expires:14})):Cookies.set("own",-1);var l=$("#seen").val();l?(o+="&seen="+encodeURIComponent(l),Cookies.set("seen",l,{expires:14})):Cookies.set("seen",-1);var v=$("#favourite").val();v?(o+="&favourite="+encodeURIComponent(v),Cookies.set("favourite",v,{expires:14})):Cookies.set("favourite",-1);var d=$("#p").val();d&&d>0?(o+="&p="+encodeURIComponent(d),e+="page/"+encodeURIComponent(d)+"/",Cookies.set("page",d,{expires:14})):Cookies.set("page",0);var C=$("#n").val();C&&C>0?(o+="&n="+encodeURIComponent(C),e+="results/"+encodeURIComponent(C)+"/",Cookies.set("results",C,{expires:14})):Cookies.remove("results"),$("#results").hide(),$("#loading").delay(600).show(0),$.ajax({url:o,dataType:"html",success:function(e){$("#results").html(e).fadeIn(600),$("#loading").hide(0)},complete:function(){window.location.href=e,ajaxSearchLock=!1}})}}function resetSearch(){document.getElementById("q").value="",document.getElementById("p").value=0,document.getElementById("movie").value=0,document.getElementById("tv").value=0,document.getElementById("own").value=-1,document.getElementById("seen").value=-1,document.getElementById("favourite").value=-1,document.getElementById("category").value="",document.getElementById("format").value="",document.getElementById("filter-by").innerHTML=document.getElementById("filter-by-original").innerHTML}function setPage(e){$("#p").val(e),search()}function getQueryStringParameters(){var e=new RegExp("#!/(.*?)/?$").exec(window.location.href);if(e&&e.length>0){for(var o=new Array,t=e[1].split("/"),n=0;n<t.length;n++)o[decodeURIComponent(t[n])]=decodeURIComponent(t[++n]);return o}return!1}var ajaxSearchLock=!1,loadingTimer;
$(document).ready(function(){Cookies.get("search")&&$("#q").val(Cookies.get("search")),Cookies.get("category")&&$("#category").val(Cookies.get("category")),Cookies.get("format")&&$("#format").val(Cookies.get("format")),Cookies.get("sort")&&$("#sort").val(Cookies.get("sort")),Cookies.get("layout")&&$("#l").val(Cookies.get("layout")),Cookies.get("movie")&&$("#movie").val(Cookies.get("movie")),Cookies.get("tv")&&$("#tv").val(Cookies.get("tv")),Cookies.get("own")&&$("#own").val(Cookies.get("own")),Cookies.get("seen")&&$("#seen").val(Cookies.get("seen")),Cookies.get("favourite")&&$("#favourite").val(Cookies.get("favourite")),Cookies.get("page")&&$("#p").val(Cookies.get("page")),Cookies.get("results")&&$("#n").val(Cookies.get("results"));var e=getQueryStringParameters();"string"==typeof e.search&&$("#q").val(e.search),"string"==typeof e.category&&$("#category").val(e.category),"string"==typeof e.format&&$("#format").val(e.format),"string"==typeof e.sort&&$("#sort").val(e.sort),"string"==typeof e.page&&$("#p").val(e.page),"string"==typeof e.results&&$("#n").val(e.results),$("#q").keyup(function(e){13==e.which&&search(),46==e.which&&(this.value="",search()),35==e.which&&(resetSearch(),search())}),window.addEventListener("keydown",function(e){(114===e.keyCode||(e.ctrlKey||e.metaKey)&&70===e.keyCode)&&(document.getElementById("q").focus(),e.preventDefault())}),$("i","#layout").on("click",function(){var e=$(this);e.addClass("active").siblings().removeClass("active"),document.getElementById("l").value=e.data("value"),search()}),$(".sidebar-menu").on("click","#filter-by i",function(){var e=$(this),a=!0;e.addClass("active"),e.data("toggle")?(-1==e.data("value")&&a&&(e.data("value",0),a=!1),0==e.data("value")&&a&&(e.data("value",1),e.removeClass(e.data("remove")),e.addClass(e.data("add")),a=!1),1==e.data("value")&&a&&(e.data("value",-1),e.removeClass("active"),e.removeClass(e.data("add")),e.addClass(e.data("remove")),a=!1)):0==e.data("value")?e.data("value",1):(e.removeClass("active"),e.data("value",0)),document.getElementById(e.data("id")).value=e.data("value"),search()}),search(),$(document).ajaxComplete(function(){"string"==typeof e.scroll||null!==Cookies.get("scroll")&&$(window).scrollTop(Cookies.get("scroll")),$(window).on("scroll",function(){Cookies.set("scroll",$(window).scrollTop())}),$("img.lazy").lazyload({effect:"fadeIn",threshold:200})})});
